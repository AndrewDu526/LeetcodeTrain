# LC 18 四数之和

## 1. Basic Information

- __question__: 四数之和
- __topic__: hash
- __level__: medium
- __time-cost__: null
- __completed-date__: 12-24-2025
- __completed-times__: 1
- __status__: 独立完成，但有几处小错误，题解与LC_15_三数之和几乎一致

## 2. Question

给你一个由 n 个整数组成的数组 nums ，和一个目标值 target 。请你找出并返回满足下述全部条件且不重复的四元组 [nums[a], nums[b], nums[c], nums[d]] （若两个四元组元素一一对应，则认为两个四元组重复）：
0 <= a, b, c, d < n
a、b、c 和 d 互不相同
nums[a] + nums[b] + nums[c] + nums[d] == target
你可以按 任意顺序 返回答案 。
 
示例 1：
输入：nums = [1,0,-1,0,-2,2], target = 0
输出：[[-2,-1,1,2],[-2,0,0,2],[-1,0,0,1]]
示例 2：
输入：nums = [2,2,2,2,2], target = 8
输出：[[2,2,2,2]]

提示：
1 <= nums.length <= 200
-109 <= nums[i] <= 109
-109 <= target <= 109

## 3. Solution

相比于LC_15_三数之和增加一层循环，注意for和while循环的范围和去重控制。

## 4. Code Implementation

我的答案（错误）：

    class Solution {
        public List<List<Integer>> fourSum(int[] nums, int target) {
    
            Arrays.sort(nums);
            List<List<Integer>> record = new ArrayList<>();
    
            for(int i=0;i<nums.length;i++){
    
                if(i>target){break;}
                if(i>1 && nums[i]==nums[i+1]){continue;}
    
                for(int j=1;j<nums.length;j++){
                    int left = j + 1;
                    int right = nums.length - 1;
    
                    if(j>1 && nums[j]==nums[j-1]){continue;}
    
                    while(left<right){
                        if(nums[i]+nums[j]+nums[left]+nums[right]>target){
                            right--;
                        }else if(nums[i]+nums[j]+nums[left]+nums[right]<target){
                            left++;
                        }else{
                            record.add(Arrays.asList(nums[i], nums[j], nums[left], nums[right]));
                            while(left<right && nums[left]==nums[left+1]){left++;}
                            while(left<right && nums[right]==nums[right-1]){right--;}
    
                            left++;
                            right--;
                        
                        }
                    } 
                }
            }
            return record;
        }
    }

- j应该从i+1起始
- 4个int数值相加使用long避免超出上限
- 去重时的比较需注意比较前一个还是后一个

标准答案：

    class Solution {
        public List<List<Integer>> fourSum(int[] nums, int target) {
    
            Arrays.sort(nums);
            List<List<Integer>> record = new ArrayList<>();
    
            for(int i=0;i<nums.length;i++){
    
                if(i>0 && nums[i]==nums[i-1]){continue;}
    
                for(int j=i+1;j<nums.length;j++){
                    int left = j + 1;
                    int right = nums.length - 1;
    
                    if(j>i+1 && nums[j]==nums[j-1]){continue;}
    
                    while(left<right){
                        long sum = (long)nums[i]+nums[j]+nums[left]+nums[right];
                        if(sum>target){
                            right--;
                        }else if(sum<target){
                            left++;
                        }else{
                            record.add(Arrays.asList(nums[i], nums[j], nums[left], nums[right]));
                            while(left<right && nums[left]==nums[left+1]){left++;}
                            while(left<right && nums[right]==nums[right-1]){right--;}
    
                            left++;
                            right--;
                        
                        }
                    }
                    
                }
            }
            return record;
        }
    }

## 5. Conclusion
- 剪枝是优化过程，不是必要步骤
- 注意int上限
